{
  "FLAT_STRUCTURE_RULES": [
    "FROM must contain exactly one base table.",
    "No subqueries in FROM.",
    "No subqueries in JOIN.",
    "No table aliases are allowed.",
    "Always use full table names.",
    "Use explicit JOIN syntax only.",
    "Do not use implicit comma joins.",
    "Avoid cartesian joins.",
    "Do not nest SELECT statements unless explicitly required by logic."
  ],
  "SELECT_RULES": [
    "NEVER use SELECT *.",
    "Select only necessary columns.",
    "Do not include duplicate columns.",
    "Every SELECT column must exist in the provided schema.",
    "Do not invent column names.",
    "Oracle does NOT support boolean type in SELECT.",
    "NEVER output raw boolean expressions in SELECT.",
    "If boolean indicator needed, use CASE WHEN condition THEN 1 ELSE 0 END.",
    "Alias derived columns using meaningful names.",
    "All non-aggregated SELECT columns must appear in GROUP BY when aggregation is used."
  ],
  "NULL_HANDLING_RULES": [
    "NEVER use: NOT column IS NULL.",
    "ALWAYS use: column IS NOT NULL.",
    "ALWAYS use: column IS NULL.",
    "Never compare NULL using = or !=.",
    "Use NVL only if explicitly required."
  ],
  "MORTALITY_RULES": [
    "patients.dod IS NOT NULL means deceased.",
    "patients.dod IS NULL means alive.",
    "admissions.hospital_expire_flag = 1 means in-hospital death.",
    "If mortality indicator needed in SELECT, use CASE WHEN patients.dod IS NOT NULL THEN 1 ELSE 0 END.",
    "Do not infer mortality using other columns unless explicitly required."
  ],
  "DATE_RULES_ORACLE": [
    "Today must use TRUNC(SYSDATE).",
    "Last 7 days must use SYSDATE - 7.",
    "Last month must use ADD_MONTHS(SYSDATE, -1).",
    "Do not use chained comparisons (e.g., a < b < c).",
    "Use explicit >= and <= for date ranges.",
    "Do not use PostgreSQL-specific date syntax."
  ],
  "JOIN_RULES": [
    "Use full table names in JOIN conditions.",
    "Join using subject_id for patient-level joins.",
    "Join using hadm_id for admission-level joins.",
    "Join using stay_id only for ICU-level context.",
    "Do NOT join additional tables unless explicitly required by the question.",
    "Do NOT join procedureevents unless procedures are explicitly mentioned.",
    "Do NOT introduce itemid filters unless explicitly required."
  ],
  "DISTINCT_RULES": [
    "Use DISTINCT only if joins create duplicates.",
    "If no duplicate risk exists, do not use DISTINCT.",
    "DISTINCT must apply to the entire SELECT clause."
  ],
  "ICU_LOS_RULES": [
    "For ICU stay duration analysis, ALWAYS use icustays.los.",
    "NEVER calculate ICU duration using procedureevents starttime and endtime.",
    "LOS is a direct column name in icustays.",
    "Do not search for itemid mapping for LOS."
  ],
  "ICU_UNIT_RULES": [
    "ICU unit must use icustays.first_careunit.",
    "NEVER generate icu_name.",
    "Do not assume alternative ICU naming columns."
  ],
  "STRICT_SCHEMA_USAGE_RULES": [
    "Use ONLY tables explicitly provided.",
    "Use ONLY columns explicitly provided.",
    "Never invent schema elements.",
    "If required data cannot be expressed using provided schema, do not guess.",
    "Do not assume derived columns exist unless defined."
  ],
  "AGGREGATION_AND_GROUPING_RULES": [
    "If AVG, COUNT, SUM, MIN, or MAX is used, include GROUP BY when grouping intent exists.",
    "All non-aggregated SELECT columns must appear in GROUP BY.",
    "If question contains 'average' or 'mean', use AVG().",
    "If question contains 'count' or 'number of', use COUNT().",
    "If question contains 'sum' or 'total', use SUM().",
    "If question contains 'minimum' or 'lowest', use MIN().",
    "If question contains 'maximum' or 'highest', use MAX().",
    "If grouping intent exists ('by', 'per', 'grouped by'), include GROUP BY.",
    "Use HAVING only for aggregated filtering.",
    "Do not use HAVING for non-aggregated filters.",
    "Use ORDER BY only when sorting is explicitly or implicitly required ('highest', 'lowest', 'top').",
    "If no grouping intent exists, return a single aggregated result.",
    "If not needed, return empty arrays: group_by: [], having: [], order_by: []."
  ],
  "FILTERING_RULES": [
    "Use WHERE for row-level filtering.",
    "Apply filters before aggregation.",
    "Use IN() for multiple categorical values.",
    "Avoid unnecessary conditions.",
    "Ensure chronological order: admittime < dischtime.",
    "Ensure ICU intime < outtime before logic using duration."
  ],
  "SAFETY_RULES": [
    "Avoid double counting due to multiple event rows.",
    "Use COUNT(DISTINCT subject_id) when counting patients.",
    "Use COUNT(DISTINCT hadm_id) when counting admissions.",
    "Use COUNT(DISTINCT stay_id) when counting ICU stays.",
    "Ensure final SELECT directly answers the question.",
    "Avoid unnecessary complexity in flat query mode."
  ]
}